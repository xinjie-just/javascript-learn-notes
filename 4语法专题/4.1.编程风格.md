# 编程风格

如果不注意编程风格的规范，可能会写出一些难以察觉的错误。

## 1. 区块

如果循环和判断的代码体只有一行，JavaScript 允许该区块（block）省略大括号。但如果是两行就必须加上大括号。

```javascript
if (a) b();
c();
```

原意可能是：

```javascript
if (a) {
  b();
  c();
}
```

但实际效果却是：

```javascript
if (a) {
  b();
}
c();
```

区块起首的大括号的位置，有许多不同的写法。最流行的有两种，一种是起首的大括号另起一行。

```javascript
/*
return
{
  key: value;
}
*/
// <=>
return;
{
  key: value;
}
```

为了避免这一类错误，需要写成下面这样。

```javascript
return {
  key: value,
};
```

**表示区块起首的大括号，不要另起一行。**

## 2. 行尾的分号

`do...while` 循环是有分号的。

```javascript
do {
  a--;
} while (a > 0); // 分号不能省略
```

**函数表达式仍然要使用分号。**

```javascript
let f = function f() {};
```

## 3. 全局变量

JavaScript 最大的语法缺点，可能就是全局变量对于任何一个代码块，都是可读可写。这对代码的模块化和重复使用，非常不利。

全局变量尽量不用，如果一定要用，建议使用大写字母表示，更容易看出来这是全局变量。**全局变量写在一个对象中，需要使用时，获取该对象的属性。**

```javascript
let a1 = 1,
  b1 = 2,
  c1 = 3;
// 定义三个全局变量

let o = {
  a2: 1,
  b2: 2,
  c2: 3,
}; // 定义一个全局变量
```
